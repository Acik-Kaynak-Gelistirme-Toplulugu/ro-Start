#!/bin/bash
# Pre-commit hook to ensure code quality

echo "üîç Running pre-commit checks..."

# Run ruff
echo "  ‚Üí Checking Python code with ruff..."
if ! venv/bin/ruff check .; then
    echo "‚ùå Ruff check failed. Please fix the issues before committing."
    exit 1
fi

# Run black
echo "  ‚Üí Checking Python formatting with black..."
if ! venv/bin/black --check .; then
    echo "‚ùå Black formatting check failed. Run 'black .' to fix."
    exit 1
fi

# Run frontend checks if package.json exists
if [ -f "frontend/package.json" ]; then
    echo "  ‚Üí Checking frontend code..."
    cd frontend
    if ! npm run lint 2>/dev/null; then
        echo "‚ö†Ô∏è  Frontend lint check skipped (no lint script found)"
    fi
    cd ..
fi

echo "‚úÖ All pre-commit checks passed!"
exit 0
